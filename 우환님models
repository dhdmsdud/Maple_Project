from django.db import models
from django.utils import timezone
from datetime import datetime
# Create your models here.
pay_choice = {
    ('card', '카드'),
    ('cash', '현금')
}

status_choice = {
    ('done','완료'),
    ('doing','진행중')
}

class Order(models.Model):
    orderno = models.CharField(max_length=20, primary_key=True)
    orderdate = models.DateTimeField(default=timezone.now)
    payment = models.CharField(max_length=20, choices=pay_choice)
    status = models.CharField(max_length=20, choices=status_choice)

    def __str__(self):
        return self.orderno + ' , ' + self.orderdate.strftime('%Y-%m-%d') + ' , ' + self.payment + ' , ' + self.status


class Menu(models.Model):
    mno = models.CharField(max_length=10, primary_key=True)
    mname = models.CharField(max_length=100)
    cost = models.IntegerField()

    def __str__(self):
        return self.mname+ ' , ' + str(self.cost)



class OrderDetail(models.Model):
    orderno = models.ForeignKey(Order, on_delete=models.CASCADE)
    mno = models.ForeignKey(Menu, on_delete=models.CASCADE)
    cost = models.IntegerField()
    qty = models.IntegerField()

    class Meta:
        unique_together =(('orderno','mno'))

    def __str__(self):
        return str(self.orderno) + ' , ' + str(self.mno) + ' , ' + str(self.cost)


class Staff(models.Model):
    staff_id = models.CharField(max_length=10)
    staff_name = models.CharField(max_length=20)
    staff_position = models.CharField(max_length=10)
    staff_day = models.CharField(max_length=20)
    staff_phonenumber = models.CharField(max_length=20)

    def __str__(self):
        return self.staff_name+ ' , ' + self.staff_phonenumber






